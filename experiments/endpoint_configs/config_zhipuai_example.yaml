# 智谱AI配置示例
# 此配置文件演示如何配置Magentic-UI使用智谱AI模型

# 定义智谱AI客户端基础配置 (使用YAML锚点)
zhipuai_base_config: &zhipuai_base_config
  base_url: https://open.bigmodel.cn/api/paas/v4/
  api_key: ${ZHIPUAI_API_KEY}  # 从环境变量读取
  max_retries: 10

# 为每个智能体配置模型
model_client_configs:
  # 编排器 - 负责任务规划,使用最强性能模型
  orchestrator:
    provider: OpenAIChatCompletionClient
    config:
      <<: *zhipuai_base_config
      model: glm-4.6
      temperature: 0.7
      max_tokens: 6000

  # 网页浏览器 - 负责Web自动化,需要强大的理解能力
  web_surfer:
    provider: OpenAIChatCompletionClient
    config:
      <<: *zhipuai_base_config
      model: glm-4.6
      temperature: 0.5
      max_tokens: 6000

  # 编程器 - 负责代码生成,需要精确性
  coder:
    provider: OpenAIChatCompletionClient
    config:
      <<: *zhipuai_base_config
      model: glm-4.6
      temperature: 0.3
      max_tokens: 8000

  # 文件浏览器 - 负责文件操作,使用平衡型模型
  file_surfer:
    provider: OpenAIChatCompletionClient
    config:
      <<: *zhipuai_base_config
      model: glm-4.5-air
      temperature: 0.5
      max_tokens: 4000

  # 动作守卫 - 负责安全检查,使用快速模型
  action_guard:
    provider: OpenAIChatCompletionClient
    config:
      <<: *zhipuai_base_config
      model: glm-4-flash
      temperature: 0.1
      max_tokens: 2000

# 计划学习客户端 (用于从历史消息中学习计划)
plan_learning_client:
  provider: OpenAIChatCompletionClient
  config:
    <<: *zhipuai_base_config
    model: glm-4.6
    temperature: 0.7
    max_tokens: 6000

# 其他Magentic-UI配置
cooperative_planning: true
autonomous_execution: false
max_actions_per_step: 5
max_turns: 20
approval_policy: auto-conservative
allow_for_replans: true
do_bing_search: false
websurfer_loop: false

# 使用说明:
# 1. 设置环境变量: export ZHIPUAI_API_KEY=your-api-key
# 2. 启动: magentic-ui --port 8081 --config config_zhipuai_example.yaml
